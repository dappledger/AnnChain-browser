package job

import (
	"encoding/json"
	"testing"

	"github.com/stretchr/testify/assert"
)

func Test(t *testing.T) {
	respStr := `{"block_meta":{"hash":"5B2A82F0DF3BB948B2B045A775B570B763DE3EB5","header":{"chain_id":"annTest-001","height":10481109,"time":15240316310000000,"num_txs":1,"last_block_id":{"hash":"F76C8911F1C3444D69719E1C45D8010424C099AA","parts":{"total":1,"hash":"04E3615EDE4AA38BDF865D937E12F541CDB099F3"}},"last_commit_hash":"06A505EA0209EEBEA1BD081D715ACF2EF2A56839","data_hash":"4745EE016213B71D8EFCF54A9AC914FFA3080E3A","validators_hash":"B963A2074370E61F1D01088019665EC4B3408839","app_hash":"45197E198BDEF94F94988E82DB6BEC6D28C008B960BD9A17D7D2EC9B65EB4BB7","recepits_hash":"","proposer_address":"3C5F512B767B3734F5E50BA93D763D992E30ADE1"},"parts_header":{"total":1,"hash":"F59874F8E070F001ABA37316CA4B86A213703297"}},"block":{"header":{"chain_id":"annTest-001","height":10481109,"time":1524031631000000,"num_txs":1,"last_block_id":{"hash":"F76C8911F1C3444D69719E1C45D8010424C099AA","parts":{"total":1,"hash":"04E3615EDE4AA38BDF865D937E12F541CDB099F3"}},"last_commit_hash":"06A505EA0209EEBEA1BD081D715ACF2EF2A56839","data_hash":"4745EE016213B71D8EFCF54A9AC914FFA3080E3A","validators_hash":"B963A2074370E61F1D01088019665EC4B3408839","app_hash":"45197E198BDEF94F94988E82DB6BEC6D28C008B960BD9A17D7D2EC9B65EB4BB7","recepits_hash":"","proposer_address":"3C5F512B767B3734F5E50BA93D763D992E30ADE1"},"data":{"txs":["F863820D1E8083015F9094FF8DAD2364476ED8C7D308E9CFFC2C1A1035E20A81D3801CA00690E51EA8EBB1CA012A3D079B5CE5F04ED71D6E101DC4113DEF7C8D221E3B58A0127AF8CB032874FDBFE60FFBA5695A2A2BB56DA178726BC9EC668794EF2A4C2E"]},"last_commit":{"blockID":{"hash":"F76C8911F1C3444D69719E1C45D8010424C099AA","parts":{"total":1,"hash":"04E3615EDE4AA38BDF865D937E12F541CDB099F3"}},"precommits":[null,{"validator_address":"5DA2632B8563BB83E675FEB8692DB211B631802F","validator_index":1,"height":10481108,"round":0,"type":2,"block_id":{"hash":"F76C8911F1C3444D69719E1C45D8010424C099AA","parts":{"total":1,"hash":"04E3615EDE4AA38BDF865D937E12F541CDB099F3"}},"signature":[1,"2B2585086BB369040A5195085CD85332644A90860287032E913AD1A13B32BE912090CE68FAF38D01C51EE35FDD3BEAD8FF14AF8021F582D139806F750C2FDE0E"]},{"validator_address":"D0BE2DE2ACF7DFB6AD81FC9E768DCAFDFDF97CF0","validator_index":2,"height":10481108,"round":0,"type":2,"block_id":{"hash":"F76C8911F1C3444D69719E1C45D8010424C099AA","parts":{"total":1,"hash":"04E3615EDE4AA38BDF865D937E12F541CDB099F3"}},"signature":[1,"B1FB4EBBB4520D89328BA4C4E33656A6B7D0098E3A7280196CB9E20695F19472F9DC4A89974612509942DCEE272A5808F2F31734FBBC411B7E957E619B5A6501"]},{"validator_address":"F59468377E86FFF3918596A9E6C8D30BD806AB68","validator_index":3,"height":10481108,"round":0,"type":2,"block_id":{"hash":"F76C8911F1C3444D69719E1C45D8010424C099AA","parts":{"total":1,"hash":"04E3615EDE4AA38BDF865D937E12F541CDB099F3"}},"signature":[1,"E6FACB6066B25B2AAED8BE9B3FDF7F893C5114E108DE4106CC1C746B254A23A9A283BC5AB05DE903978F775C8E79B4A08EFDF497E2220F03D4CF296489548000"]}]}}}`
	var result ResultBlock
	err := json.Unmarshal([]byte(respStr), &result)
	assert.Nil(t, err)
}
